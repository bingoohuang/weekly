# â€œç³»ç»Ÿæ¶æ„éƒ¨â€å‘¨åˆŠ2020å¹´10æœŸ

## 0. ç›®å½•

è¯»å®Œæœ¬æœŸå‘¨åˆŠï¼Œå¤§æ¦‚éœ€è¦èŠ±è´¹æ‚¨10åˆ†é’Ÿçš„å®è´µæ—¶é—´ï¼Œä¸è¿‡è¶…å€¼å“¦ã€‚

1. [å¿ƒç†ï¼šè´¢åŠ¡è‡ªç”±çš„å¹¸å­˜è€…åå·®](#1-å¿ƒç†ï¼šè´¢åŠ¡è‡ªç”±çš„å¹¸å­˜è€…åå·®)
2. [è¯»ä¹¦ï¼šä¼˜ç§€è®¾è®¡çš„5å¤§åŸåˆ™](#2-ä¼˜ç§€çš„è®¾è®¡5å¤§åŸåˆ™ï¼šæ ‡é¢˜ã€å¯¹æ¯”ã€é‡å¤ã€å¯¹é½ã€äº²å¯†)
3. [å¯é ï¼šç³»ç»Ÿè¦æ±‚5ä¸ª9çš„å¯é æ€§](#3-å¯é ï¼šç³»ç»Ÿè¦æ±‚5ä¸ª9çš„å¯é æ€§)
4. [é€Ÿåº¦ï¼šSqlite3çš„å†™å…¥TPSä¸º30ä¸‡](#4-é€Ÿåº¦ï¼šSqlite3çš„å†™å…¥TPSä¸º30ä¸‡)
5. [æƒŠè¯§ï¼š0.1+0.2=0.30000000000000004](#5-æƒŠè¯§ï¼š0.1+0.2=0.30000000000000004)
6. [è´µåœˆï¼š"ç”·å¥³å…³ç³»"å¤ªä¹±â€‹](#6-è´µåœˆï¼šç”·å¥³å…³ç³»å¤ªä¹±â€‹)

å‘¨åˆŠæ¯å‘¨äº”ä¸å‡†æ—¶å‘å¸ƒï¼Œæ¬¢è¿æ‚¨[æäº¤Issue](https://github.com/bingoohuang/weekly/issues)æˆ–è€…è”ç³»ä¸»ç¼–é»„è€é‚ª(wx: bingoohuang)ï¼Œå‘æœ¬å‘¨åˆŠæŠ•é€’æœ‰å€¼å¾—åˆ†äº«çš„å†…å®¹å“¦ï¼Œç®€çŸ­çš„ä¸€å¼ å›¾ä¸€æ®µæ–‡äº¦å¯ã€‚

## 1. å¿ƒç†ï¼šè´¢åŠ¡è‡ªç”±çš„å¹¸å­˜è€…åå·®

![image](https://user-images.githubusercontent.com/1940588/92836292-d0525e80-f40e-11ea-8c26-4007c52a9cae.png)

### å¹¸å­˜è€…åå·®çš„æ¥æº

æœ€æ—©æ¥æºäºäºŒæˆ˜æœŸé—´ï¼Œè‹±å†›å¯¹æˆ˜æ–—æœºæ”¹è¿›åšçš„ç»Ÿè®¡ï¼Œæ ¹æ®å¯¹é£å›æ¥çš„å—æŸç°æœºçš„ç»Ÿè®¡å‘ç°å…¶ä¸»è¦å—æŸéƒ¨ä½é›†ä¸­åœ¨æœºç¿¼ï¼Œæ‰€ä»¥ç»“è®ºæ˜¯åº”å½“å‡å°‘æœºè…¹çš„è£…ç”²åŠ å¼ºæœºç¿¼çš„è£…ç”²ï¼Ÿ

è¿™ä¸ªç»“è®ºæ˜¾ç„¶æ˜¯å¯ç¬‘çš„ï¼Œé€ æˆè¿™ç§åå·®çš„åŸå› æ˜¯æœºè…¹ä¸­å¼¹çš„ç°æœºå¤§å¤šæ•°éƒ½å æ¯äº†ï¼Œç»Ÿè®¡ç»“è®ºäº§ç”Ÿäº†åå·®ï¼Œè¿™ä¸ªåå·®è¢«å‘½åä¸ºâ€œå¹¸å­˜è€…åå·®â€ã€‚

åœ¨ç°å®ç”Ÿæ´»ä¸­è¯¥åå·®æ¯”æ¯”çš†æ˜¯ï¼Œä¸¾ä¸ªæœ€ç®€å•çš„æ —å­ï¼Œè€æœ‰äººè¯´â€œè¯»ä¹¦æœ‰ä»€ä¹ˆç”¨ï¼Œæˆ‘çš„å°å­¦åŒå­¦XXXï¼Œä»–ä»å°æˆç»©ä¸€å¡Œç³Šæ¶‚ï¼Œåˆä¸­éƒ½æ²¡å¿µå®Œå°±é€€å­¦äº†ï¼Œç°åœ¨ç”Ÿæ„åšå¾—å¯å¤§äº†ï¼Œæˆ‘æœ¬ç§‘æ¯•ä¸šè¿˜ä¸æ˜¯ç§Ÿç€æˆ¿åƒç€æ³¡é¢æœä¹æ™šäº”ã€‚â€å®é™…æƒ…å†µæ˜¯ä¸€ä¸ªç­ä¼šè¯»ä¹¦çš„é‚£å¸®å­©å­æ—¥åä¹Ÿæœ‰ç”Ÿæ„åšå¾—ä¸é”™çš„ã€ä¹Ÿæœ‰ç§Ÿæˆ¿åƒæ³¡é¢çš„ã€ä¹Ÿæœ‰åœ¨å®¶å•ƒè€çš„ï¼Œå¹³å‡ç”Ÿæ´»æ°´å‡†é«˜äºä¸è¯»ä¹¦çš„ï¼Œä½†æ˜¯ä¸è¯»ä¹¦çš„å­©å­ä¸­æœ‰ä¸€äº›å·²ç»å¸æ¯’å¸æˆé¬¼äº†ã€èµŒåšæ¬ ä¸€å±è‚¡å€ºèº²èµ·æ¥äº†ã€åœ¨å®¶ä¹¡åŠ å…¥é»‘ç¤¾ä¼šè¢«ç æ­»äº†ï¼Œè¿™äº›äººä½ çœ‹ä¸åˆ°ï¼Œä½ åªèƒ½çœ‹åˆ°é‚£äº›å¹¸å­˜è€…ï¼Œç”Ÿæ„åšå¾—å¯å¤§äº†ã€‚

æœ‰çš„ä¸“å®¶å°†è¿™é“ä½œæ–‡é¢˜éšå«çš„é“ç†æ¦‚æ‹¬ä¸ºâ€œå¹¸å­˜è€…åå·®â€ï¼ˆæˆ–è€…â€œæ²‰é»˜çš„æ•°æ®â€â€œæ­»äººä¸ä¼šè¯´è¯â€ç­‰ï¼‰ï¼Œé€šä¿—çš„è§£é‡Šæ˜¯ï¼Œå¦‚æœåˆ†æé—®é¢˜æ—¶æ‰€ä¾èµ–çš„ä¿¡æ¯å…¨éƒ¨æˆ–å¤§éƒ¨åˆ†æ¥è‡ªæ˜¾è‘—ä¿¡æ¯ï¼Œè€Œè¾ƒå°‘åˆ©ç”¨éšè—ä¿¡æ¯æˆ–è€…å¿½ç•¥æ²‰é»˜çš„å¤§å¤šæ•°ï¼Œå¾—å‡ºçš„ç»“è®ºå°±å¯èƒ½ä¸äº‹å®å·®ä¹‹åƒé‡Œã€‚

### å¤§å®¶éƒ½ä¹°åˆ°ç¥¨äº†çš„æ•…äº‹

ä¸€åè®°è€…æ¥åˆ°ç«è½¦ç«™å°ä¸Šï¼Œéšæœºè¯¢é—®ï¼šâ€œè¯·é—®ä½ ä¹°åˆ°ç«è½¦ç¥¨äº†å—ï¼Ÿâ€ ä¸€ä½å¤§å¦ˆå¾®å¾®ä¸€æ„£ï¼Œå›ç­”ï¼šâ€œä¹°åˆ°äº†â€ ã€‚

è®°è€…åˆè½¬å‘ä¸€ä½ç²¾ç˜¦ç²¾ç˜¦çš„å¹´è½»äººï¼Œé—®ï¼šâ€œè¯·é—®ä½ ä¹°åˆ°ç«è½¦ç¥¨äº†å—ï¼Ÿâ€ å¹´è½»äººå›ç­”ï¼šâ€œä¹°åˆ°äº†â€ ã€‚

éšåè®°è€…åˆé—®äº†5ä¸ªäººï¼Œå¤§å®¶éƒ½å›ç­”ï¼šâ€œä¹°åˆ°äº†â€ ã€‚

æœ€åè®°è€…å¯¹ç€é•œå¤´è¯´ï¼šâ€œä»Šå¹´è™½ç„¶ç«è½¦ç¥¨éš¾ä¹°ï¼Œä½†æ˜¯é€šè¿‡é‡‡è®¿æˆ‘ä»¬å‘ç°ï¼Œå¤§å®¶éƒ½ä¹°åˆ°äº†ç«è½¦ç¥¨ï¼Œç°åœ¨æ­£æ»¡æ€€å¸Œæœ›åœ°èµ¶å›å®¶ä¹¡ï¼Œè¿‡ä¸ªå›¢åœ†å¹´ï¼â€

> å¹¸å­˜è€…åå·®ï¼Œå°±æ˜¯å¿½ç•¥äº†ç­›é€‰æ¡ä»¶ï¼ŒæŠŠç»è¿‡ç­›é€‰çš„ç»“æœå½“æˆéšæœºç»“æœã€‚

### åˆ›ä¸šåè´¢åŠ¡è‡ªç”±çš„æ¢¦æƒ³

å†çœ‹ã€Šæ¸…é†’æ€è€ƒçš„è‰ºæœ¯ã€‹ç¬¬ä¸€ç¯‡ï¼Œå¹¸å­˜åè¯¯ï¼ˆå¹¸å­˜è€…åå·®ï¼‰ï¼š

> ç”±äºæ—¥å¸¸ç”Ÿæ´»ä¸­æ›´å®¹æ˜“çœ‹åˆ°æˆåŠŸã€çœ‹ä¸åˆ°å¤±è´¥ï¼Œä½ ä¼šç³»ç»Ÿæ€§åœ°é«˜ä¼°æˆåŠŸçš„å¸Œæœ›ã€‚

ä½ çœ‹åˆ°é˜¿é‡Œä¸Šå¸‚ã€è…¾è®¯ä¸Šå¸‚ã€é™Œé™Œä¸Šå¸‚è®©å¾ˆå¤šç¨‹åºå‘˜è´¢åŠ¡è‡ªç”±ï¼Œå°±è®¤ä¸ºè‡ªå·±ä¹Ÿå¯ä»¥åŠ å…¥ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œç­‰å¾…ä¸Šå¸‚åè´¢åŠ¡è‡ªç”±ã€‚è¿™å°±æ˜¯å¹¸å­˜è€…åå·®ã€‚

ä½ çœ‹åˆ°æœ‰çš„ IT åŸ¹è®­æœºæ„çš„å­¦å‘˜ä¸€åŸ¹è®­å‡ºæ¥å°±æ‰¾åˆ°æœˆè–ª 2w çš„å·¥ä½œï¼Œå°±è®¤ä¸ºè‡ªå·±ä¹Ÿå¯ä»¥é€šè¿‡è¿™æ ·çš„é€”å¾„æ¥è·å¾— 2w æœˆè–ªã€‚è¿™å°±æ˜¯å¹¸å­˜è€…åå·®ã€‚

## 2. ä¼˜ç§€çš„è®¾è®¡5å¤§åŸåˆ™ï¼šæ ‡é¢˜ã€å¯¹æ¯”ã€é‡å¤ã€å¯¹é½ã€äº²å¯†

![image](https://user-images.githubusercontent.com/1940588/92837282-fa585080-f40f-11ea-8b1d-c76d6f95f83a.png)

![image](https://user-images.githubusercontent.com/1940588/92592915-dfcc8d00-f2d2-11ea-8a65-6f373d81135e.png)

ä»¥ä¸‹æ˜¯å¯¹4åŸºæœ¬è®¾è®¡åŸåˆ™çš„æ¦‚è¿°ï¼Œæ¯ä¸€ä¸ªä¼˜ç§€çš„è®¾è®¡ä¸­éƒ½åº”ç”¨äº†è¿™äº›è®¾è®¡åŸåˆ™ã€‚å°½ç®¡æˆ‘åœ¨åé¢å°†é€ä¸ªè®¨è®ºå„ä¸ªåŸåˆ™ï¼Œä¸è¿‡è¦è®°ä½ï¼Œå®ƒä»¬å®é™…ä¸Šæ˜¯ç›¸äº’å…³è”çš„ã€‚åªåº”ç”¨æŸä¸€ä¸ªåŸåˆ™çš„æƒ…å†µå¾ˆå°‘ã€‚

1. å¯¹æ¯”ï¼ˆContrastï¼‰
    å¯¹æ¯”çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œè¦é¿å…é¡µé¢ä¸Šçš„å…ƒç´ å¤ªè¿‡ç›¸ä¼¼ã€‚å¦‚æœå…ƒç´ ï¼ˆå­—ä½“ã€é¢œè‰²ã€å¤§å°ã€çº¿å®½ã€å½¢çŠ¶ã€ç©ºé—´ç­‰ï¼‰ä¸ç›¸åŒï¼Œé‚£å°±å¹²è„†è®©å®ƒä»¬æˆªç„¶ä¸åŒã€‚è¦è®©é¡µé¢å¼•äººæ³¨ç›®ï¼Œå¯¹æ¯”é€šå¸¸æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªå› ç´ ï¼Œæ­£æ˜¯å®ƒèƒ½ä½¿è¯»è€…é¦–å…ˆçœ‹è¿™ä¸ªé¡µé¢ã€‚
1. é‡å¤ï¼ˆRepetitionï¼‰
    è®©è®¾è®¡ä¸­çš„è§†è§‰è¦ç´ åœ¨æ•´ä¸ªä½œå“ä¸­é‡å¤å‡ºç°ã€‚å¯ä»¥é‡å¤é¢œè‰²ã€å½¢çŠ¶ã€æ è´¨ã€ç©ºé—´å…³ç³»ã€çº¿å®½ã€å­—ä½“ã€å¤§å°å’Œå›¾ç‰‡ï¼Œç­‰ç­‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ—¢èƒ½å¢åŠ æ¡ç†æ€§ï¼Œè¿˜å¯ä»¥åŠ å¼ºç»Ÿä¸€æ€§ã€‚
1. å¯¹é½ï¼ˆAlignmentï¼‰
    ä»»ä½•ä¸œè¥¿éƒ½ä¸èƒ½åœ¨é¡µé¢ä¸Šéšæ„å®‰æ”¾ã€‚æ¯ä¸ªå…ƒç´ éƒ½åº”å½“ä¸é¡µé¢ä¸Šçš„å¦ä¸€ä¸ªå…ƒç´ æœ‰æŸç§è§†è§‰è”ç³»ã€‚è¿™æ ·èƒ½å»ºç«‹ä¸€ç§æ¸…æ™°ã€ç²¾å·§è€Œä¸”æ¸…çˆ½çš„å¤–è§‚ã€‚
1. äº²å¯†æ€§ï¼ˆProximityï¼‰
    å½¼æ­¤ç›¸å…³çš„é¡¹åº”å½“é è¿‘ï¼Œå½’ç»„åœ¨ä¸€èµ·ã€‚å¦‚æœå¤šä¸ªé¡¹ç›¸äº’ä¹‹é—´å­˜åœ¨å¾ˆè¿‘çš„äº²å¯†æ€§ï¼Œå®ƒä»¬å°±ä¼šæˆä¸ºä¸€ä¸ªè§†è§‰å•å…ƒï¼Œè€Œä¸æ˜¯å¤šä¸ªå­¤ç«‹çš„å…ƒç´ ã€‚è¿™æœ‰åŠ©äºç»„ç»‡ä¿¡æ¯ï¼Œå‡å°‘æ··ä¹±ï¼Œä¸ºè¯»è€…æä¾›æ¸…æ™°çš„ç»“æ„

ç¼–è€…åŠ äº†ä¸€ä¸ªåŸåˆ™ï¼Œé‚£å°±æ˜¯é†’ç›®çš„æ ‡é¢˜ã€‚

## 3. å¯é ï¼šç³»ç»Ÿè¦æ±‚5ä¸ª9çš„å¯é æ€§

Xä¸ª9è¡¨ç¤ºåœ¨ç³»ç»Ÿ1å¹´æ—¶é—´çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨æ—¶é—´ä¸æ€»æ—¶é—´ï¼ˆ1å¹´ï¼‰ä¹‹æ¯”ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„è®¡ç®—æ¥æ„Ÿå—ä¸‹Xä¸ª9åœ¨ä¸åŒçº§åˆ«çš„å¯é æ€§å·®å¼‚ã€‚

å¯ç”¨åº¦A   | 9çš„ä¸ªæ•°     | å¹´åœæœºæ—¶é—´       | é€‚ç”¨äº§å“
---      | ---        |    ---         | ---
0.9      |   1ä¸ª9     |     36.5å¤©      | å¯é æ€§æ— æ„ä¹‰
0.99     |   2ä¸ª9     |     3.65å¤©      | å¯é æ€§æ— æ„ä¹‰
0.999    |   3ä¸ª9     |     500åˆ†é’Ÿ     | ç”µè„‘æˆ–æœåŠ¡å™¨
0.9999   |   4ä¸ª9     |     50 åˆ†é’Ÿ     | ä¼ä¸šçº§è®¾å¤‡
*0.99999*  |   5ä¸ª9     |     5  åˆ†é’Ÿ     | ä¸€èˆ¬ç”µä¿¡çº§è®¾å¤‡
0.999999 |   6ä¸ª9     |     0.5åˆ†é’Ÿ     | æ›´é«˜è¦æ±‚ç”µä¿¡çº§è®¾å¤‡

è®¡ç®—æ–¹æ³•ï¼š

- 3ä¸ª9ï¼š(1-99.9%)*365*24=8.76å°æ—¶ï¼Œè¡¨ç¤ºè¯¥ç³»ç»Ÿåœ¨è¿ç»­è¿è¡Œ1å¹´æ—¶é—´é‡Œæœ€å¤šå¯èƒ½çš„ä¸šåŠ¡ä¸­æ–­æ—¶é—´æ˜¯8.76å°æ—¶ã€‚
- 4ä¸ª9ï¼š(1-99.99%)*365*24=0.876å°æ—¶=52.6åˆ†é’Ÿï¼Œè¡¨ç¤ºè¯¥ç³»ç»Ÿåœ¨è¿ç»­è¿è¡Œ1å¹´æ—¶é—´é‡Œæœ€å¤šå¯èƒ½çš„ä¸šåŠ¡ä¸­æ–­æ—¶é—´æ˜¯52.6åˆ†é’Ÿã€‚
- 5ä¸ª9ï¼š(1-99.999%)*365*24*60=5.26åˆ†é’Ÿï¼Œè¡¨ç¤ºè¯¥ç³»ç»Ÿåœ¨è¿ç»­è¿è¡Œ1å¹´æ—¶é—´é‡Œæœ€å¤šå¯èƒ½çš„ä¸šåŠ¡ä¸­æ–­æ—¶é—´æ˜¯5.26åˆ†é’Ÿã€‚

å¥½è®°å¿†çš„æ–¹æ³•ï¼š

> åªè¦è®°ä½5ä¸ª9ï¼Œè¡¨ç¤ºå¹´åœæœº5åˆ†é’Ÿå³å¯ã€‚ç„¶å4ä¸ª9å°±æ˜¯50åˆ†é’Ÿï¼Œ3ä¸ª9å°±æ˜¯500åˆ†é’Ÿï¼Œ6ä¸ª9å°±æ˜¯0.5åˆ†é’Ÿã€‚

è¯´æ˜ï¼š

- 1ä¸ª9å’Œã€2ä¸ª9åˆ†åˆ«è¡¨ç¤ºä¸€å¹´æ—¶é—´å†…ä¸šåŠ¡å¯èƒ½ä¸­æ–­çš„æ—¶é—´æ˜¯36.5å¤©ã€3.65å¤©ï¼Œè¿™ç§çº§åˆ«çš„å¯é æ€§æˆ–è®¸è¿˜ä¸é…ä½¿ç”¨â€œå¯é æ€§â€è¿™ä¸ªè¯
- 6ä¸ª9åˆ™è¡¨ç¤ºä¸€å¹´å†…ä¸šåŠ¡ä¸­æ–­æ—¶é—´æœ€å¤šæ˜¯31ç§’ï¼Œé‚£ä¹ˆè¿™ä¸ªçº§åˆ«çš„å¯é æ€§å¹¶éå®ç°ä¸äº†ï¼Œè€Œæ˜¯è¦åšåˆ°ä»â€œ5ä¸ª9â€ åˆ°â€œ6ä¸ª9â€çš„å¯é æ€§æå‡çš„è¯ï¼Œåè€…éœ€è¦ä»˜å‡ºæ¯”å‰è€…å‡ å€çš„æˆæœ¬

## 4. é€Ÿåº¦ï¼šSqlite3çš„å†™å…¥TPSä¸º30ä¸‡

SSDç›˜å†™å…¥é€Ÿåº¦å¯ä»¥é«˜è¾¾30ä¸‡/ç§’, å‚è§[æµ‹è¯•åŸºå‡†ä»£ç ](https://github.com/bingoohuang/sqlite3perf)

![image](https://user-images.githubusercontent.com/1940588/92067151-32d7a900-edd6-11ea-8879-c52cd7dbc1b1.png)

```bash
ğŸ•™[2020-09-03 10:44:43.174] â¯ sqlite3perf generate -r 500000 -b 100 --db 'a.db?_journal=wal&sync=0' --prepared
2020/09/03 10:44:43 Generating records by config &{NumRecs:500000 BatchSize:100 Vacuum:false Prepared:true LogSeconds:2}
2020/09/03 10:44:43 Opening database
2020/09/03 10:44:43 Dropping table 'bench' if already present
2020/09/03 10:44:43 (Re-)creating table 'bench'
2020/09/03 10:44:43 Setting up the environment
2020/09/03 10:44:43 Starting progress logging
2020/09/03 10:44:43 Starting inserts
2020/09/03 10:44:44 500000/500000 (100.00%) written in 1.564473342s, avg: 3.128Âµs/record, 319596.37 records/s

sqlite3perf on î‚  master [?] via ğŸ¹ v1.15 via ğŸ v2.7.16
ğŸ•™[2020-09-03 10:44:44.980] â¯ ls -lh a.db
-rw-r--r--  1 bingoobjca  staff    52M  9  3 10:44 a.db

sqlite3perf on î‚  master [?] via ğŸ¹ v1.15 via ğŸ v2.7.16
ğŸ•™[2020-09-03 10:45:02.768] â¯ sqlite3 a.db "select count(*) from bench"
500000

sqlite3perf on î‚  master [?] via ğŸ¹ v1.15 via ğŸ v2.7.16
ğŸ•™[2020-09-03 10:45:18.680] â¯ sqlite3 a.db "select * from bench order by ID desc limit 3"
499999|b4360f0166243704|92774f4d4de17688998d2adb9f4de955714a5adb5e2d2d82fbe891196b58140c
499998|c00c55a85e1d97f2|2309d1f02a1c433c23f16e6e7e7a8f39f39f47bf4ea3790160149a702eadc801
499997|c8d46b21b5d9be88|5e539cb2d84838acc67e1eaaf0cbe416e98c6130564475946dda85d7a516de01
```

## 5. æƒŠè¯§ï¼š0.1+0.2=0.30000000000000004

å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨ç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å¦‚js, java, go, æˆ‘ä»¬åªæƒ³ç®€å•çš„è®¡ç®—å‡ºä¸ª0.1 + 0.2 ä½†æ˜¯å‡ºæ¥ä¸ª0.30000000000000004ï¼Œæ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿè¿™ç¼–ç¨‹è¯­è¨€æ€ä¹ˆè¿™ä¹ˆlowï¼Ÿ
æ¯”å¦‚ï¼š

```js
## js ä»£ç 
> 0.1 + 0.2
0.30000000000000004
```

``` java
## javaä»£ç 
System.out.println(.1 + .2); //0.30000000000000004and0.3
System.out.println(.1F + .2F); // 0.3
```

```go
package main
import "fmt"

func main() {
  fmt.Println(.1 + .2) //0.3
  var a float64 = .1
  var b float64 = .2
  fmt.Println(a + b) // 0.30000000000000004
  fmt.Printf("%.54f\n", .1 + .2) //0.299999999999999988897769753748434595763683319091796875
}
```

ä½ æ˜¯ä¸æ˜¯æ›´æƒ³ä¸åˆ°ï¼Œè¿™ä¸ªé—®é¢˜èƒ½è®© William Kahan åœ¨ 1989 å¹´è·å¾—å›¾çµå¥–ã€‚è¿™ä¸ªé—®é¢˜å…¶å®æ˜¯å•ç²¾åº¦å’Œå¤šç²¾åº¦åœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºçš„é—®é¢˜ï¼Œæ‹¿å•ç²¾åº¦è¡¨ç¤ºæ¥è¯´

![image](https://user-images.githubusercontent.com/9961069/87389355-2eaebc80-c5d9-11ea-9777-e9019da43461.png)

![image](https://user-images.githubusercontent.com/9961069/87389362-32dada00-c5d9-11ea-8233-aa13a2acd87c.png)

### å‚è€ƒ

1. [ä¸ºä»€ä¹ˆ 0.1 + 0.2 = 0.300000004ï¼Ÿ](https://mp.weixin.qq.com/s/eeuar4IQAdenPiwAaooszw)
1. [Floating Point Math](https://0.30000000000000004.com/)

## 6. è´µåœˆï¼šç”·å¥³å…³ç³»å¤ªä¹±

é—®é¢˜ï¼šæ•°æ®åº“é‡Œï¼Œå­˜ç”¨æˆ·æ€§åˆ«ï¼Œè¯·é—®æ€ä¹ˆå­˜ï¼Ÿâ€‹

![image](https://user-images.githubusercontent.com/1940588/76683781-ad064c80-6641-11ea-8245-eaede5942cd0.png)

æˆ‘ä¸å¾—ä¸æ‰¿è®¤æˆ‘æ˜¯â€œç›´ç”·â€ã€‚è™½ç„¶æœ‰å°ä¼™å­è¯´ï¼Œå¦‚æœä½¿ç”¨â€œç›´ç”·â€œå­˜æ³•ï¼Œä¼šè¢«è€å¤§æ‰“æ­»çš„ï¼Œæˆ‘æƒ³ä»–è‚¯å®šæ˜¯ä¸€ä¸ªâ€ä¸æ‰›æ‰“â€œçš„äººï¼Œæ‰€ä»¥æœ€åä¹Ÿåšä¸äº†â€ç›´ç”·â€œã€‚
